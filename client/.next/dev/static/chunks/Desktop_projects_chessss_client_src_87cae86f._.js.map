{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/krishan%20kant/Desktop/projects/chessss/client/src/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\";\r\nimport { twMerge } from \"tailwind-merge\";\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n    return twMerge(clsx(inputs));\r\n}\r\n\r\nexport function formatTime(seconds: number): string {\r\n    if (seconds < 0) return \"∞\";\r\n    const mins = Math.floor(seconds / 60);\r\n    const secs = seconds % 60;\r\n    return `${mins}:${secs.toString().padStart(2, \"0\")}`;\r\n}\r\n\r\nexport function formatTimeAgo(date: Date | string): string {\r\n    const now = new Date();\r\n    const past = new Date(date);\r\n    const diffMs = now.getTime() - past.getTime();\r\n    const diffMins = Math.floor(diffMs / 60000);\r\n    const diffHours = Math.floor(diffMs / 3600000);\r\n    const diffDays = Math.floor(diffMs / 86400000);\r\n\r\n    if (diffMins < 1) return \"Just now\";\r\n    if (diffMins < 60) return `${diffMins}m ago`;\r\n    if (diffHours < 24) return `${diffHours}h ago`;\r\n    if (diffDays < 7) return `${diffDays}d ago`;\r\n    return past.toLocaleDateString();\r\n}\r\n\r\nexport function formatRating(rating: number): string {\r\n    return rating.toLocaleString();\r\n}\r\n\r\nexport function getRatingChangeColor(change: number): string {\r\n    if (change > 0) return \"text-success\";\r\n    if (change < 0) return \"text-accent\";\r\n    return \"text-foreground-muted\";\r\n}\r\n\r\nexport function getResultColor(result: \"win\" | \"loss\" | \"draw\"): string {\r\n    switch (result) {\r\n        case \"win\":\r\n            return \"text-success\";\r\n        case \"loss\":\r\n            return \"text-accent\";\r\n        case \"draw\":\r\n            return \"text-foreground-muted\";\r\n    }\r\n}\r\n\r\nexport function getResultLabel(result: \"win\" | \"loss\" | \"draw\"): string {\r\n    return result.toUpperCase();\r\n}\r\n\r\nexport function truncateUsername(username: string, maxLength = 15): string {\r\n    if (username.length <= maxLength) return username;\r\n    return username.slice(0, maxLength - 2) + \"..\";\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACtC,OAAO,IAAA,qNAAO,EAAC,IAAA,4LAAI,EAAC;AACxB;AAEO,SAAS,WAAW,OAAe;IACtC,IAAI,UAAU,GAAG,OAAO;IACxB,MAAM,OAAO,KAAK,KAAK,CAAC,UAAU;IAClC,MAAM,OAAO,UAAU;IACvB,OAAO,GAAG,KAAK,CAAC,EAAE,KAAK,QAAQ,GAAG,QAAQ,CAAC,GAAG,MAAM;AACxD;AAEO,SAAS,cAAc,IAAmB;IAC7C,MAAM,MAAM,IAAI;IAChB,MAAM,OAAO,IAAI,KAAK;IACtB,MAAM,SAAS,IAAI,OAAO,KAAK,KAAK,OAAO;IAC3C,MAAM,WAAW,KAAK,KAAK,CAAC,SAAS;IACrC,MAAM,YAAY,KAAK,KAAK,CAAC,SAAS;IACtC,MAAM,WAAW,KAAK,KAAK,CAAC,SAAS;IAErC,IAAI,WAAW,GAAG,OAAO;IACzB,IAAI,WAAW,IAAI,OAAO,GAAG,SAAS,KAAK,CAAC;IAC5C,IAAI,YAAY,IAAI,OAAO,GAAG,UAAU,KAAK,CAAC;IAC9C,IAAI,WAAW,GAAG,OAAO,GAAG,SAAS,KAAK,CAAC;IAC3C,OAAO,KAAK,kBAAkB;AAClC;AAEO,SAAS,aAAa,MAAc;IACvC,OAAO,OAAO,cAAc;AAChC;AAEO,SAAS,qBAAqB,MAAc;IAC/C,IAAI,SAAS,GAAG,OAAO;IACvB,IAAI,SAAS,GAAG,OAAO;IACvB,OAAO;AACX;AAEO,SAAS,eAAe,MAA+B;IAC1D,OAAQ;QACJ,KAAK;YACD,OAAO;QACX,KAAK;YACD,OAAO;QACX,KAAK;YACD,OAAO;IACf;AACJ;AAEO,SAAS,eAAe,MAA+B;IAC1D,OAAO,OAAO,WAAW;AAC7B;AAEO,SAAS,iBAAiB,QAAgB,EAAE,YAAY,EAAE;IAC7D,IAAI,SAAS,MAAM,IAAI,WAAW,OAAO;IACzC,OAAO,SAAS,KAAK,CAAC,GAAG,YAAY,KAAK;AAC9C"}},
    {"offset": {"line": 80, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/krishan%20kant/Desktop/projects/chessss/client/src/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { Slot } from \"@radix-ui/react-slot\";\r\nimport { cva, type VariantProps } from \"class-variance-authority\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst buttonVariants = cva(\r\n    \"inline-flex items-center justify-center gap-2 whitespace-nowrap font-semibold transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-accent disabled:pointer-events-none disabled:opacity-50 active:scale-95\",\r\n    {\r\n        variants: {\r\n            variant: {\r\n                default:\r\n                    \"bg-accent hover:bg-accent-light text-white shadow-md hover:shadow-glow-red\",\r\n                destructive:\r\n                    \"bg-red-900 hover:bg-red-800 text-white\",\r\n                outline:\r\n                    \"border border-border bg-transparent hover:bg-white/5 hover:border-accent text-white\",\r\n                secondary:\r\n                    \"bg-background-elevated hover:bg-background-secondary text-white border border-border\",\r\n                ghost:\r\n                    \"hover:bg-white/5 text-foreground-muted hover:text-white\",\r\n                link:\r\n                    \"text-accent underline-offset-4 hover:underline\",\r\n            },\r\n            size: {\r\n                default: \"h-11 px-6 py-2 text-sm\",\r\n                sm: \"h-9 px-4 text-xs\",\r\n                lg: \"h-14 px-8 text-base\",\r\n                xl: \"h-16 px-10 text-lg\",\r\n                icon: \"h-10 w-10\",\r\n            },\r\n        },\r\n        defaultVariants: {\r\n            variant: \"default\",\r\n            size: \"default\",\r\n        },\r\n    }\r\n);\r\n\r\nexport interface ButtonProps\r\n    extends React.ButtonHTMLAttributes<HTMLButtonElement>,\r\n    VariantProps<typeof buttonVariants> {\r\n    asChild?: boolean;\r\n}\r\n\r\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\r\n    ({ className, variant, size, asChild = false, ...props }, ref) => {\r\n        const Comp = asChild ? Slot : \"button\";\r\n        return (\r\n            <Comp\r\n                className={cn(buttonVariants({ variant, size, className }))}\r\n                ref={ref}\r\n                {...props}\r\n            />\r\n        );\r\n    }\r\n);\r\nButton.displayName = \"Button\";\r\n\r\nexport { Button, buttonVariants };\r\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AACA;;;;;;AAEA,MAAM,iBAAiB,IAAA,sNAAG,EACtB,wPACA;IACI,UAAU;QACN,SAAS;YACL,SACI;YACJ,aACI;YACJ,SACI;YACJ,WACI;YACJ,OACI;YACJ,MACI;QACR;QACA,MAAM;YACF,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,IAAI;YACJ,MAAM;QACV;IACJ;IACA,iBAAiB;QACb,SAAS;QACT,MAAM;IACV;AACJ;AASJ,MAAM,uBAAS,uNAAgB,MAC3B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO,EAAE;IACtD,MAAM,OAAO,UAAU,uNAAI,GAAG;IAC9B,qBACI,yOAAC;QACG,WAAW,IAAA,wKAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,KAAK;QACJ,GAAG,KAAK;;;;;;AAGrB;;AAEJ,OAAO,WAAW,GAAG"}},
    {"offset": {"line": 148, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/krishan%20kant/Desktop/projects/chessss/client/src/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nexport interface InputProps\r\n    extends React.InputHTMLAttributes<HTMLInputElement> {\r\n    icon?: React.ReactNode;\r\n}\r\n\r\nconst Input = React.forwardRef<HTMLInputElement, InputProps>(\r\n    ({ className, type, icon, ...props }, ref) => {\r\n        return (\r\n            <div className=\"relative\">\r\n                <input\r\n                    type={type}\r\n                    className={cn(\r\n                        \"flex h-12 w-full bg-background-secondary border border-border px-4 py-3 text-sm text-white placeholder:text-foreground-dim focus:outline-none focus:border-accent focus:ring-1 focus:ring-accent/50 transition-all disabled:cursor-not-allowed disabled:opacity-50\",\r\n                        icon && \"pr-12\",\r\n                        className\r\n                    )}\r\n                    ref={ref}\r\n                    {...props}\r\n                />\r\n                {icon && (\r\n                    <div className=\"absolute right-4 top-1/2 -translate-y-1/2 text-foreground-dim\">\r\n                        {icon}\r\n                    </div>\r\n                )}\r\n            </div>\r\n        );\r\n    }\r\n);\r\nInput.displayName = \"Input\";\r\n\r\nexport { Input };\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAOA,MAAM,sBAAQ,uNAAgB,MAC1B,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;IAClC,qBACI,yOAAC;QAAI,WAAU;;0BACX,yOAAC;gBACG,MAAM;gBACN,WAAW,IAAA,wKAAE,EACT,sQACA,QAAQ,SACR;gBAEJ,KAAK;gBACJ,GAAG,KAAK;;;;;;YAEZ,sBACG,yOAAC;gBAAI,WAAU;0BACV;;;;;;;;;;;;AAKrB;;AAEJ,MAAM,WAAW,GAAG"}},
    {"offset": {"line": 200, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/krishan%20kant/Desktop/projects/chessss/client/src/lib/api.ts"],"sourcesContent":["const API_URL = process.env.NEXT_PUBLIC_API_URL || \"http://localhost:5000\";\r\n\r\ninterface ApiResponse<T> {\r\n    data?: T;\r\n    error?: string;\r\n}\r\n\r\nasync function request<T>(\r\n    endpoint: string,\r\n    options: RequestInit = {}\r\n): Promise<ApiResponse<T>> {\r\n    const token = typeof window !== \"undefined\" ? localStorage.getItem(\"token\") : null;\r\n\r\n    const headers: HeadersInit = {\r\n        \"Content-Type\": \"application/json\",\r\n        ...(token && { Authorization: `Bearer ${token}` }),\r\n        ...options.headers,\r\n    };\r\n\r\n    try {\r\n        const response = await fetch(`${API_URL}${endpoint}`, {\r\n            ...options,\r\n            headers,\r\n        });\r\n\r\n        const data = await response.json();\r\n\r\n        if (!response.ok) {\r\n            return { error: data.message || \"An error occurred\" };\r\n        }\r\n\r\n        return { data };\r\n    } catch (error) {\r\n        console.error(\"API Error:\", error);\r\n        return { error: \"Network error. Please try again.\" };\r\n    }\r\n}\r\n\r\n// Auth API\r\nexport const authApi = {\r\n    register: (username: string, email: string, password: string) =>\r\n        request<{ token: string; user: User }>(\"/api/auth/register\", {\r\n            method: \"POST\",\r\n            body: JSON.stringify({ username, email, password }),\r\n        }),\r\n\r\n    login: (email: string, password: string) =>\r\n        request<{ token: string; user: User }>(\"/api/auth/login\", {\r\n            method: \"POST\",\r\n            body: JSON.stringify({ email, password }),\r\n        }),\r\n\r\n    me: () => request<{ user: User }>(\"/api/auth/me\"),\r\n\r\n    logout: () => request(\"/api/auth/logout\", { method: \"POST\" }),\r\n};\r\n\r\n// Rooms API\r\nexport const roomsApi = {\r\n    create: (data: CreateRoomData) =>\r\n        request<{ room: Room }>(\"/api/rooms/create\", {\r\n            method: \"POST\",\r\n            body: JSON.stringify(data),\r\n        }),\r\n\r\n    join: (roomId: string) =>\r\n        request<{ room: Room }>(`/api/rooms/join/${roomId}`, {\r\n            method: \"POST\",\r\n        }),\r\n\r\n    get: (roomId: string) => request<{ room: Room }>(`/api/rooms/${roomId}`),\r\n\r\n    getHistory: (page = 1, limit = 20) =>\r\n        request<{ matches: Match[]; pagination: Pagination }>(\r\n            `/api/rooms/history/matches?page=${page}&limit=${limit}`\r\n        ),\r\n\r\n    getMatch: (matchId: string) =>\r\n        request<{ match: Match }>(`/api/rooms/history/match/${matchId}`),\r\n\r\n    getMatchByRoom: (roomId: string) =>\r\n        request<{ match: Match }>(`/api/rooms/history/room/${roomId}`),\r\n};\r\n\r\n// Types\r\nexport interface User {\r\n    id: string;\r\n    _id?: string;\r\n    username: string;\r\n    email?: string;\r\n    rating: number;\r\n    gamesPlayed: number;\r\n    wins: number;\r\n    losses: number;\r\n    draws: number;\r\n    isOnline?: boolean;\r\n    isGuest?: boolean;\r\n    guestId?: string;\r\n}\r\n\r\nexport interface Room {\r\n    roomId: string;\r\n    player1: Player;\r\n    player2: Player;\r\n    gameStatus: \"waiting\" | \"in_progress\" | \"finished\" | \"abandoned\";\r\n    currentTurn: \"white\" | \"black\";\r\n    timeControl: number;\r\n    matchType: \"casual\" | \"rated\" | \"ai\";\r\n    gameData: GameData;\r\n    result?: GameResult;\r\n    isPrivate: boolean;\r\n    aiLevel?: number;\r\n}\r\n\r\nexport interface Player {\r\n    userId?: string;\r\n    guestId?: string;\r\n    guestUsername?: string;\r\n    color: \"white\" | \"black\";\r\n    timeLeft: number;\r\n}\r\n\r\nexport interface GameData {\r\n    fen: string;\r\n    pgn: string;\r\n    moves: Move[];\r\n}\r\n\r\nexport interface Move {\r\n    from: string;\r\n    to: string;\r\n    piece: string;\r\n    san?: string;\r\n    fen?: string;\r\n    timestamp?: Date;\r\n    timeLeft?: number;\r\n    moveNumber?: number;\r\n}\r\n\r\nexport interface GameResult {\r\n    winner: \"white\" | \"black\" | \"draw\";\r\n    reason: string;\r\n}\r\n\r\nexport interface Match {\r\n    _id: string;\r\n    userId: User;\r\n    opponentId?: User;\r\n    roomId: string;\r\n    result: \"win\" | \"loss\" | \"draw\";\r\n    userColor: \"white\" | \"black\";\r\n    matchType: \"casual\" | \"rated\" | \"ai\";\r\n    timeControl: number;\r\n    ratingBefore: number;\r\n    ratingAfter: number;\r\n    ratingChange: number;\r\n    gameData: {\r\n        pgn: string;\r\n        finalFen: string;\r\n        startingFen?: string;\r\n        moveCount: number;\r\n        gameDuration: number;\r\n        moves?: Move[];\r\n    };\r\n    endReason: string;\r\n    createdAt: string;\r\n}\r\n\r\nexport interface CreateRoomData {\r\n    timeControl: number;\r\n    matchType: \"casual\" | \"rated\" | \"ai\";\r\n    isPrivate?: boolean;\r\n    aiLevel?: number;\r\n    isGuest?: boolean;\r\n    guestUsername?: string;\r\n}\r\n\r\nexport interface Pagination {\r\n    page: number;\r\n    limit: number;\r\n    total: number;\r\n    pages: number;\r\n}\r\n"],"names":[],"mappings":";;;;;;AAAgB;AAAhB,MAAM,UAAU,uNAAO,CAAC,GAAG,CAAC,mBAAmB,IAAI;AAOnD,eAAe,QACX,QAAgB,EAChB,UAAuB,CAAC,CAAC;IAEzB,MAAM,QAAQ,uCAAgC,aAAa,OAAO,CAAC,WAAW;IAE9E,MAAM,UAAuB;QACzB,gBAAgB;QAChB,GAAI,SAAS;YAAE,eAAe,CAAC,OAAO,EAAE,OAAO;QAAC,CAAC;QACjD,GAAG,QAAQ,OAAO;IACtB;IAEA,IAAI;QACA,MAAM,WAAW,MAAM,MAAM,GAAG,UAAU,UAAU,EAAE;YAClD,GAAG,OAAO;YACV;QACJ;QAEA,MAAM,OAAO,MAAM,SAAS,IAAI;QAEhC,IAAI,CAAC,SAAS,EAAE,EAAE;YACd,OAAO;gBAAE,OAAO,KAAK,OAAO,IAAI;YAAoB;QACxD;QAEA,OAAO;YAAE;QAAK;IAClB,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,cAAc;QAC5B,OAAO;YAAE,OAAO;QAAmC;IACvD;AACJ;AAGO,MAAM,UAAU;IACnB,UAAU,CAAC,UAAkB,OAAe,WACxC,QAAuC,sBAAsB;YACzD,QAAQ;YACR,MAAM,KAAK,SAAS,CAAC;gBAAE;gBAAU;gBAAO;YAAS;QACrD;IAEJ,OAAO,CAAC,OAAe,WACnB,QAAuC,mBAAmB;YACtD,QAAQ;YACR,MAAM,KAAK,SAAS,CAAC;gBAAE;gBAAO;YAAS;QAC3C;IAEJ,IAAI,IAAM,QAAwB;IAElC,QAAQ,IAAM,QAAQ,oBAAoB;YAAE,QAAQ;QAAO;AAC/D;AAGO,MAAM,WAAW;IACpB,QAAQ,CAAC,OACL,QAAwB,qBAAqB;YACzC,QAAQ;YACR,MAAM,KAAK,SAAS,CAAC;QACzB;IAEJ,MAAM,CAAC,SACH,QAAwB,CAAC,gBAAgB,EAAE,QAAQ,EAAE;YACjD,QAAQ;QACZ;IAEJ,KAAK,CAAC,SAAmB,QAAwB,CAAC,WAAW,EAAE,QAAQ;IAEvE,YAAY,CAAC,OAAO,CAAC,EAAE,QAAQ,EAAE,GAC7B,QACI,CAAC,gCAAgC,EAAE,KAAK,OAAO,EAAE,OAAO;IAGhE,UAAU,CAAC,UACP,QAA0B,CAAC,yBAAyB,EAAE,SAAS;IAEnE,gBAAgB,CAAC,SACb,QAA0B,CAAC,wBAAwB,EAAE,QAAQ;AACrE"}},
    {"offset": {"line": 279, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/krishan%20kant/Desktop/projects/chessss/client/src/lib/socket.ts"],"sourcesContent":["import { io, Socket } from \"socket.io-client\";\r\nimport { Room, GameResult, Move } from \"./api\";\r\n\r\nconst SOCKET_URL = process.env.NEXT_PUBLIC_SOCKET_URL || \"http://localhost:5000\";\r\n\r\nclass SocketService {\r\n    private socket: Socket | null = null;\r\n    private listeners: Map<string, Set<Function>> = new Map();\r\n\r\n    connect(): Socket {\r\n        if (this.socket?.connected) {\r\n            return this.socket;\r\n        }\r\n\r\n        this.socket = io(SOCKET_URL, {\r\n            transports: [\"websocket\"],\r\n            autoConnect: true,\r\n        });\r\n\r\n        this.socket.on(\"connect\", () => {\r\n            console.log(\"Socket connected:\", this.socket?.id);\r\n        });\r\n\r\n        this.socket.on(\"disconnect\", () => {\r\n            console.log(\"Socket disconnected\");\r\n        });\r\n\r\n        this.socket.on(\"connect_error\", (error) => {\r\n            console.error(\"Socket connection error:\", error);\r\n        });\r\n\r\n        return this.socket;\r\n    }\r\n\r\n    disconnect(): void {\r\n        if (this.socket) {\r\n            this.socket.disconnect();\r\n            this.socket = null;\r\n        }\r\n    }\r\n\r\n    getSocket(): Socket | null {\r\n        return this.socket;\r\n    }\r\n\r\n    // Authentication\r\n    authenticate(token: string): void {\r\n        this.socket?.emit(\"authenticate\", token);\r\n    }\r\n\r\n    authenticateGuest(username: string, guestId?: string): void {\r\n        this.socket?.emit(\"authenticate_guest\", { username, guestId });\r\n    }\r\n\r\n    // Room events\r\n    createRoom(data: {\r\n        timeControl: number;\r\n        matchType: \"casual\" | \"rated\" | \"ai\";\r\n        isPrivate?: boolean;\r\n        aiLevel?: number;\r\n    }): void {\r\n        this.socket?.emit(\"create_room\", data);\r\n    }\r\n\r\n    joinRoom(roomId: string): void {\r\n        this.socket?.emit(\"join_room\", { roomId });\r\n    }\r\n\r\n    joinRoomAsPlayer(roomId: string): void {\r\n        this.socket?.emit(\"join_room_as_player\", { roomId });\r\n    }\r\n\r\n    // Matchmaking\r\n    joinQueue(data: {\r\n        matchType: \"casual\" | \"rated\";\r\n        timeControl: number;\r\n        preferredColor?: \"white\" | \"black\" | \"random\";\r\n    }): void {\r\n        this.socket?.emit(\"join_queue\", data);\r\n    }\r\n\r\n    leaveQueue(): void {\r\n        this.socket?.emit(\"leave_queue\");\r\n    }\r\n\r\n    // Game actions\r\n    makeMove(roomId: string, move: { from: string; to: string; promotion?: string }): void {\r\n        this.socket?.emit(\"make_move\", { roomId, move });\r\n    }\r\n\r\n    resign(roomId: string): void {\r\n        this.socket?.emit(\"resign\", { roomId });\r\n    }\r\n\r\n    offerDraw(roomId: string): void {\r\n        this.socket?.emit(\"offer_draw\", { roomId });\r\n    }\r\n\r\n    respondToDraw(roomId: string, accept: boolean): void {\r\n        this.socket?.emit(\"draw_response\", { roomId, accept });\r\n    }\r\n\r\n    // Chat\r\n    sendMessage(roomId: string, message: string): void {\r\n        this.socket?.emit(\"send_message\", { roomId, message });\r\n    }\r\n\r\n    // Event listeners\r\n    on<T>(event: string, callback: (data: T) => void): () => void {\r\n        this.socket?.on(event, callback);\r\n\r\n        if (!this.listeners.has(event)) {\r\n            this.listeners.set(event, new Set());\r\n        }\r\n        this.listeners.get(event)?.add(callback);\r\n\r\n        // Return unsubscribe function\r\n        return () => {\r\n            this.socket?.off(event, callback);\r\n            this.listeners.get(event)?.delete(callback);\r\n        };\r\n    }\r\n\r\n    off(event: string, callback?: Function): void {\r\n        if (callback) {\r\n            this.socket?.off(event, callback as any);\r\n            this.listeners.get(event)?.delete(callback);\r\n        } else {\r\n            this.socket?.off(event);\r\n            this.listeners.delete(event);\r\n        }\r\n    }\r\n\r\n    // Event types for TypeScript\r\n    onAuthenticated(callback: (data: { user: any }) => void) {\r\n        return this.on(\"authenticated\", callback);\r\n    }\r\n\r\n    onAuthError(callback: (data: { message: string }) => void) {\r\n        return this.on(\"authentication_error\", callback);\r\n    }\r\n\r\n    onRoomCreated(callback: (data: { room: Room; message: string }) => void) {\r\n        return this.on(\"room_created\", callback);\r\n    }\r\n\r\n    onRoomUpdate(callback: (data: { room: Room }) => void) {\r\n        return this.on(\"room_update\", callback);\r\n    }\r\n\r\n    onGameStarted(callback: (data: { room: Room; message: string }) => void) {\r\n        return this.on(\"game_started\", callback);\r\n    }\r\n\r\n    onMoveMade(callback: (data: {\r\n        move: Move;\r\n        fen: string;\r\n        pgn: string;\r\n        currentTurn: \"white\" | \"black\";\r\n        gameStatus: string;\r\n        isAIMove?: boolean;\r\n    }) => void) {\r\n        return this.on(\"move_made\", callback);\r\n    }\r\n\r\n    onInvalidMove(callback: (data: { message: string }) => void) {\r\n        return this.on(\"invalid_move\", callback);\r\n    }\r\n\r\n    onTimeUpdate(callback: (data: {\r\n        player1TimeLeft: number;\r\n        player2TimeLeft: number;\r\n    }) => void) {\r\n        return this.on(\"time_update\", callback);\r\n    }\r\n\r\n    onGameEnded(callback: (data: {\r\n        result: GameResult;\r\n        message: string;\r\n    }) => void) {\r\n        return this.on(\"game_ended\", callback);\r\n    }\r\n\r\n    onQueueJoined(callback: (data: { message: string }) => void) {\r\n        return this.on(\"queue_joined\", callback);\r\n    }\r\n\r\n    onMatchFound(callback: (data: { roomId: string; color: \"white\" | \"black\" }) => void) {\r\n        return this.on(\"match_found\", callback);\r\n    }\r\n\r\n    onDrawOffered(callback: (data: { from: string; username: string }) => void) {\r\n        return this.on(\"draw_offered\", callback);\r\n    }\r\n\r\n    onDrawDeclined(callback: () => void) {\r\n        return this.on(\"draw_declined\", callback);\r\n    }\r\n\r\n    onChatMessage(callback: (data: {\r\n        id: string;\r\n        username: string;\r\n        message: string;\r\n        timestamp: string;\r\n        isGuest: boolean;\r\n    }) => void) {\r\n        return this.on(\"chat_message\", callback);\r\n    }\r\n\r\n    onOpponentDisconnected(callback: (data: {\r\n        message: string;\r\n        graceSeconds: number;\r\n    }) => void) {\r\n        return this.on(\"opponent_disconnected\", callback);\r\n    }\r\n\r\n    onOpponentReconnected(callback: (data: { message: string }) => void) {\r\n        return this.on(\"opponent_reconnected\", callback);\r\n    }\r\n\r\n    onGameReconnected(callback: (data: { room: Room; message: string }) => void) {\r\n        return this.on(\"game_reconnected\", callback);\r\n    }\r\n\r\n    onError(callback: (data: { message: string }) => void) {\r\n        return this.on(\"error\", callback);\r\n    }\r\n}\r\n\r\n// Singleton instance\r\nexport const socketService = new SocketService();\r\nexport default socketService;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 470, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/krishan%20kant/Desktop/projects/chessss/client/src/context/AuthContext.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { createContext, useContext, useEffect, useState, useCallback } from \"react\";\r\nimport { authApi, User } from \"@/lib/api\";\r\nimport socketService from \"@/lib/socket\";\r\n\r\ninterface AuthContextType {\r\n    user: User | null;\r\n    isLoading: boolean;\r\n    isAuthenticated: boolean;\r\n    isGuest: boolean;\r\n    login: (email: string, password: string) => Promise<{ success: boolean; error?: string }>;\r\n    register: (username: string, email: string, password: string) => Promise<{ success: boolean; error?: string }>;\r\n    loginAsGuest: (username: string) => void;\r\n    logout: () => void;\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\r\n\r\nexport function AuthProvider({ children }: { children: React.ReactNode }) {\r\n    const [user, setUser] = useState<User | null>(null);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n\r\n    // Initialize auth on mount\r\n    useEffect(() => {\r\n        const initAuth = async () => {\r\n            const token = localStorage.getItem(\"token\");\r\n            const guestId = localStorage.getItem(\"guestId\");\r\n            const guestUsername = localStorage.getItem(\"guestUsername\");\r\n\r\n            // Connect socket\r\n            const socket = socketService.connect();\r\n\r\n            if (token) {\r\n                // Try to authenticate with token\r\n                const { data, error } = await authApi.me();\r\n                if (data?.user) {\r\n                    setUser(data.user);\r\n                    socketService.authenticate(token);\r\n                } else {\r\n                    // Token invalid, clear it\r\n                    localStorage.removeItem(\"token\");\r\n                }\r\n            } else if (guestId && guestUsername) {\r\n                // Reconnect as guest\r\n                setUser({\r\n                    id: guestId,\r\n                    username: guestUsername,\r\n                    rating: 600,\r\n                    gamesPlayed: 0,\r\n                    wins: 0,\r\n                    losses: 0,\r\n                    draws: 0,\r\n                    isGuest: true,\r\n                    guestId,\r\n                });\r\n                socketService.authenticateGuest(guestUsername, guestId);\r\n            }\r\n\r\n            setIsLoading(false);\r\n\r\n            // Listen for auth events\r\n            socketService.onAuthenticated((data) => {\r\n                if (data.user.isGuest) {\r\n                    localStorage.setItem(\"guestId\", data.user.guestId || data.user.id);\r\n                    localStorage.setItem(\"guestUsername\", data.user.username);\r\n                }\r\n                setUser(data.user);\r\n            });\r\n\r\n            socketService.onAuthError((data) => {\r\n                console.error(\"Auth error:\", data.message);\r\n            });\r\n        };\r\n\r\n        initAuth();\r\n\r\n        return () => {\r\n            socketService.disconnect();\r\n        };\r\n    }, []);\r\n\r\n    const login = useCallback(async (email: string, password: string) => {\r\n        const { data, error } = await authApi.login(email, password);\r\n\r\n        if (data?.token && data?.user) {\r\n            localStorage.setItem(\"token\", data.token);\r\n            localStorage.removeItem(\"guestId\");\r\n            localStorage.removeItem(\"guestUsername\");\r\n            setUser(data.user);\r\n            socketService.authenticate(data.token);\r\n            return { success: true };\r\n        }\r\n\r\n        return { success: false, error: error || \"Login failed\" };\r\n    }, []);\r\n\r\n    const register = useCallback(async (username: string, email: string, password: string) => {\r\n        const { data, error } = await authApi.register(username, email, password);\r\n\r\n        if (data?.token && data?.user) {\r\n            localStorage.setItem(\"token\", data.token);\r\n            localStorage.removeItem(\"guestId\");\r\n            localStorage.removeItem(\"guestUsername\");\r\n            setUser(data.user);\r\n            socketService.authenticate(data.token);\r\n            return { success: true };\r\n        }\r\n\r\n        return { success: false, error: error || \"Registration failed\" };\r\n    }, []);\r\n\r\n    const loginAsGuest = useCallback((username: string) => {\r\n        const existingGuestId = localStorage.getItem(\"guestId\");\r\n        socketService.authenticateGuest(username, existingGuestId || undefined);\r\n\r\n        // User will be set when we receive the authenticated event\r\n    }, []);\r\n\r\n    const logout = useCallback(() => {\r\n        localStorage.removeItem(\"token\");\r\n        localStorage.removeItem(\"guestId\");\r\n        localStorage.removeItem(\"guestUsername\");\r\n        setUser(null);\r\n        socketService.disconnect();\r\n        window.location.href = \"/\";\r\n    }, []);\r\n\r\n    return (\r\n        <AuthContext.Provider\r\n            value={{\r\n                user,\r\n                isLoading,\r\n                isAuthenticated: !!user,\r\n                isGuest: user?.isGuest || false,\r\n                login,\r\n                register,\r\n                loginAsGuest,\r\n                logout,\r\n            }}\r\n        >\r\n            {children}\r\n        </AuthContext.Provider>\r\n    );\r\n}\r\n\r\nexport function useAuth() {\r\n    const context = useContext(AuthContext);\r\n    if (context === undefined) {\r\n        throw new Error(\"useAuth must be used within an AuthProvider\");\r\n    }\r\n    return context;\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 645, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/krishan%20kant/Desktop/projects/chessss/client/src/app/auth/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { motion } from \"framer-motion\";\r\nimport { useRouter, useSearchParams } from \"next/navigation\";\r\nimport Link from \"next/link\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { useAuth } from \"@/context/AuthContext\";\r\nimport {\r\n    Crown,\r\n    User,\r\n    Lock,\r\n    Mail,\r\n    Eye,\r\n    ArrowRight,\r\n    LogIn\r\n} from \"lucide-react\";\r\n\r\nexport default function AuthPage() {\r\n    const router = useRouter();\r\n    const searchParams = useSearchParams();\r\n    const { login, register, loginAsGuest, isAuthenticated } = useAuth();\r\n\r\n    const [isLogin, setIsLogin] = useState(true);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [error, setError] = useState(\"\");\r\n    const [guestUsername, setGuestUsername] = useState(\"\");\r\n\r\n    // Form state\r\n    const [formData, setFormData] = useState({\r\n        username: \"\",\r\n        email: \"\",\r\n        password: \"\",\r\n    });\r\n\r\n    useEffect(() => {\r\n        if (searchParams.get(\"mode\") === \"register\") {\r\n            setIsLogin(false);\r\n        }\r\n        if (searchParams.get(\"guest\") === \"true\") {\r\n            // Focus on guest section\r\n        }\r\n    }, [searchParams]);\r\n\r\n    useEffect(() => {\r\n        if (isAuthenticated) {\r\n            router.push(\"/dashboard\");\r\n        }\r\n    }, [isAuthenticated, router]);\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setError(\"\");\r\n        setIsLoading(true);\r\n\r\n        try {\r\n            let result;\r\n            if (isLogin) {\r\n                result = await login(formData.email, formData.password);\r\n            } else {\r\n                result = await register(formData.username, formData.email, formData.password);\r\n            }\r\n\r\n            if (!result.success) {\r\n                setError(result.error || \"Authentication failed\");\r\n            }\r\n        } catch (err) {\r\n            setError(\"An unexpected error occurred\");\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleGuestLogin = () => {\r\n        if (guestUsername.trim().length < 2) {\r\n            setError(\"Username must be at least 2 characters\");\r\n            return;\r\n        }\r\n        loginAsGuest(guestUsername.trim());\r\n        router.push(\"/dashboard\");\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen flex\">\r\n            {/* Left Panel - Member Access */}\r\n            <div className=\"flex-1 bg-white p-8 md:p-16 flex flex-col justify-center\">\r\n                <motion.div\r\n                    initial={{ opacity: 0, x: -20 }}\r\n                    animate={{ opacity: 1, x: 0 }}\r\n                    className=\"max-w-md mx-auto w-full\"\r\n                >\r\n                    {/* Logo */}\r\n                    <Link href=\"/\" className=\"inline-flex items-center gap-2 mb-12\">\r\n                        <div className=\"w-8 h-8 bg-black rounded flex items-center justify-center\">\r\n                            <Crown className=\"w-5 h-5 text-white\" />\r\n                        </div>\r\n                    </Link>\r\n\r\n                    {/* Header */}\r\n                    <h1 className=\"font-display text-4xl text-black mb-2\">\r\n                        MEMBER\r\n                        <br />\r\n                        ACCESS\r\n                    </h1>\r\n                    <p className=\"text-gray-500 text-sm tracking-widest mb-8\">\r\n                        SECURE TERMINAL // ENTER CREDENTIALS\r\n                    </p>\r\n\r\n                    {/* Toggle */}\r\n                    <div className=\"flex gap-4 mb-8\">\r\n                        <button\r\n                            onClick={() => setIsLogin(true)}\r\n                            className={`text-sm font-medium pb-2 border-b-2 transition-colors ${isLogin\r\n                                    ? \"text-black border-black\"\r\n                                    : \"text-gray-400 border-transparent hover:text-gray-600\"\r\n                                }`}\r\n                        >\r\n                            LOGIN\r\n                        </button>\r\n                        <button\r\n                            onClick={() => setIsLogin(false)}\r\n                            className={`text-sm font-medium pb-2 border-b-2 transition-colors ${!isLogin\r\n                                    ? \"text-black border-black\"\r\n                                    : \"text-gray-400 border-transparent hover:text-gray-600\"\r\n                                }`}\r\n                        >\r\n                            REGISTER\r\n                        </button>\r\n                    </div>\r\n\r\n                    {/* Form */}\r\n                    <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n                        {!isLogin && (\r\n                            <div>\r\n                                <label className=\"block text-xs text-gray-500 mb-2 tracking-widest\">\r\n                                    USERNAME / ID\r\n                                </label>\r\n                                <Input\r\n                                    type=\"text\"\r\n                                    placeholder=\"AGENT_ID_00\"\r\n                                    value={formData.username}\r\n                                    onChange={(e) => setFormData({ ...formData, username: e.target.value })}\r\n                                    className=\"bg-gray-50 border-gray-200 text-black placeholder:text-gray-400\"\r\n                                    icon={<User className=\"w-4 h-4\" />}\r\n                                    required\r\n                                />\r\n                            </div>\r\n                        )}\r\n\r\n                        <div>\r\n                            <label className=\"block text-xs text-gray-500 mb-2 tracking-widest\">\r\n                                {isLogin ? \"USERNAME / ID\" : \"EMAIL\"}\r\n                            </label>\r\n                            <Input\r\n                                type={isLogin ? \"text\" : \"email\"}\r\n                                placeholder={isLogin ? \"AGENT_ID_00\" : \"agent@elite.chess\"}\r\n                                value={formData.email}\r\n                                onChange={(e) => setFormData({ ...formData, email: e.target.value })}\r\n                                className=\"bg-gray-50 border-gray-200 text-black placeholder:text-gray-400\"\r\n                                icon={isLogin ? <User className=\"w-4 h-4\" /> : <Mail className=\"w-4 h-4\" />}\r\n                                required\r\n                            />\r\n                        </div>\r\n\r\n                        <div>\r\n                            <label className=\"block text-xs text-gray-500 mb-2 tracking-widest\">\r\n                                PASSCODE\r\n                            </label>\r\n                            <Input\r\n                                type=\"password\"\r\n                                placeholder=\"••••••••••••\"\r\n                                value={formData.password}\r\n                                onChange={(e) => setFormData({ ...formData, password: e.target.value })}\r\n                                className=\"bg-gray-50 border-gray-200 text-black placeholder:text-gray-400\"\r\n                                icon={<Lock className=\"w-4 h-4\" />}\r\n                                required\r\n                            />\r\n                        </div>\r\n\r\n                        {error && (\r\n                            <motion.p\r\n                                initial={{ opacity: 0, y: -10 }}\r\n                                animate={{ opacity: 1, y: 0 }}\r\n                                className=\"text-red-600 text-sm\"\r\n                            >\r\n                                {error}\r\n                            </motion.p>\r\n                        )}\r\n\r\n                        <Button\r\n                            type=\"submit\"\r\n                            className=\"w-full bg-black hover:bg-gray-800 text-white\"\r\n                            size=\"lg\"\r\n                            disabled={isLoading}\r\n                        >\r\n                            {isLoading ? \"AUTHENTICATING...\" : \"AUTHENTICATE\"}\r\n                            <ArrowRight className=\"w-4 h-4\" />\r\n                        </Button>\r\n                    </form>\r\n\r\n                    <div className=\"mt-6 flex items-center justify-between\">\r\n                        <button className=\"text-xs text-gray-500 hover:text-black underline\">\r\n                            FORGOT CREDENTIALS?\r\n                        </button>\r\n                        <span className=\"text-xs text-gray-400\">V.2.0.4</span>\r\n                    </div>\r\n\r\n                    {/* Bottom bar */}\r\n                    <div className=\"mt-12 pt-4 border-t border-gray-200\">\r\n                        <p className=\"text-xs text-gray-500\">\r\n                            NEW TO THE CLUB?{\" \"}\r\n                            <button\r\n                                onClick={() => setIsLogin(false)}\r\n                                className=\"text-accent hover:underline font-medium\"\r\n                            >\r\n                                SIGN UP NOW\r\n                            </button>\r\n                        </p>\r\n                    </div>\r\n                </motion.div>\r\n            </div>\r\n\r\n            {/* Right Panel - Visitor Pass (Guest) */}\r\n            <div className=\"flex-1 bg-accent p-8 md:p-16 flex flex-col justify-center relative overflow-hidden\">\r\n                {/* Decorative background shapes */}\r\n                <div className=\"absolute bottom-0 right-0 w-64 h-64 bg-red-500/20 transform rotate-45\" />\r\n                <div className=\"absolute bottom-20 right-20 w-32 h-32 bg-red-500/30 transform rotate-45\" />\r\n\r\n                <motion.div\r\n                    initial={{ opacity: 0, x: 20 }}\r\n                    animate={{ opacity: 1, x: 0 }}\r\n                    className=\"max-w-md mx-auto w-full relative z-10\"\r\n                >\r\n                    {/* Icon */}\r\n                    <div className=\"w-16 h-16 bg-black rounded-full flex items-center justify-center mb-8\">\r\n                        <Eye className=\"w-8 h-8 text-white\" />\r\n                    </div>\r\n\r\n                    {/* Header */}\r\n                    <h2 className=\"font-display text-5xl text-white italic mb-4\">\r\n                        VISITOR\r\n                        <br />\r\n                        PASS\r\n                    </h2>\r\n\r\n                    {/* Description */}\r\n                    <div className=\"flex items-start gap-2 mb-8\">\r\n                        <div className=\"w-1 h-16 bg-white/50\" />\r\n                        <p className=\"text-white/80\">\r\n                            Spectator mode enabled. No credentials required for limited access.\r\n                        </p>\r\n                    </div>\r\n\r\n                    {/* Guest login */}\r\n                    <div className=\"space-y-4\">\r\n                        <Input\r\n                            type=\"text\"\r\n                            placeholder=\"Enter your callsign...\"\r\n                            value={guestUsername}\r\n                            onChange={(e) => setGuestUsername(e.target.value)}\r\n                            className=\"bg-white/10 border-white/30 text-white placeholder:text-white/50\"\r\n                        />\r\n\r\n                        <Button\r\n                            onClick={handleGuestLogin}\r\n                            className=\"w-full bg-black hover:bg-gray-900 text-white\"\r\n                            size=\"lg\"\r\n                        >\r\n                            CONTINUE AS GUEST\r\n                            <LogIn className=\"w-4 h-4\" />\r\n                        </Button>\r\n                    </div>\r\n\r\n                    {/* Limitations notice */}\r\n                    <div className=\"mt-8 p-4 bg-black/20 rounded\">\r\n                        <p className=\"text-xs text-white/60 uppercase tracking-wider mb-2\">\r\n                            Guest Limitations:\r\n                        </p>\r\n                        <ul className=\"text-sm text-white/80 space-y-1\">\r\n                            <li>• Casual games only</li>\r\n                            <li>• No ELO ranking</li>\r\n                            <li>• Limited match history</li>\r\n                        </ul>\r\n                    </div>\r\n                </motion.div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;AATA;;;;;;;;;AAmBe,SAAS;;IACpB,MAAM,SAAS,IAAA,8LAAS;IACxB,MAAM,eAAe,IAAA,oMAAe;IACpC,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,YAAY,EAAE,eAAe,EAAE,GAAG,IAAA,wLAAO;IAElE,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,qNAAQ,EAAC;IACvC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,qNAAQ,EAAC;IAC3C,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,qNAAQ,EAAC;IACnC,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,qNAAQ,EAAC;IAEnD,aAAa;IACb,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,qNAAQ,EAAC;QACrC,UAAU;QACV,OAAO;QACP,UAAU;IACd;IAEA,IAAA,sNAAS;8BAAC;YACN,IAAI,aAAa,GAAG,CAAC,YAAY,YAAY;gBACzC,WAAW;YACf;YACA,IAAI,aAAa,GAAG,CAAC,aAAa,QAAQ;YACtC,yBAAyB;YAC7B;QACJ;6BAAG;QAAC;KAAa;IAEjB,IAAA,sNAAS;8BAAC;YACN,IAAI,iBAAiB;gBACjB,OAAO,IAAI,CAAC;YAChB;QACJ;6BAAG;QAAC;QAAiB;KAAO;IAE5B,MAAM,eAAe,OAAO;QACxB,EAAE,cAAc;QAChB,SAAS;QACT,aAAa;QAEb,IAAI;YACA,IAAI;YACJ,IAAI,SAAS;gBACT,SAAS,MAAM,MAAM,SAAS,KAAK,EAAE,SAAS,QAAQ;YAC1D,OAAO;gBACH,SAAS,MAAM,SAAS,SAAS,QAAQ,EAAE,SAAS,KAAK,EAAE,SAAS,QAAQ;YAChF;YAEA,IAAI,CAAC,OAAO,OAAO,EAAE;gBACjB,SAAS,OAAO,KAAK,IAAI;YAC7B;QACJ,EAAE,OAAO,KAAK;YACV,SAAS;QACb,SAAU;YACN,aAAa;QACjB;IACJ;IAEA,MAAM,mBAAmB;QACrB,IAAI,cAAc,IAAI,GAAG,MAAM,GAAG,GAAG;YACjC,SAAS;YACT;QACJ;QACA,aAAa,cAAc,IAAI;QAC/B,OAAO,IAAI,CAAC;IAChB;IAEA,qBACI,yOAAC;QAAI,WAAU;;0BAEX,yOAAC;gBAAI,WAAU;0BACX,cAAA,yOAAC,mPAAM,CAAC,GAAG;oBACP,SAAS;wBAAE,SAAS;wBAAG,GAAG,CAAC;oBAAG;oBAC9B,SAAS;wBAAE,SAAS;wBAAG,GAAG;oBAAE;oBAC5B,WAAU;;sCAGV,yOAAC,sNAAI;4BAAC,MAAK;4BAAI,WAAU;sCACrB,cAAA,yOAAC;gCAAI,WAAU;0CACX,cAAA,yOAAC,4PAAK;oCAAC,WAAU;;;;;;;;;;;;;;;;sCAKzB,yOAAC;4BAAG,WAAU;;gCAAwC;8CAElD,yOAAC;;;;;gCAAK;;;;;;;sCAGV,yOAAC;4BAAE,WAAU;sCAA6C;;;;;;sCAK1D,yOAAC;4BAAI,WAAU;;8CACX,yOAAC;oCACG,SAAS,IAAM,WAAW;oCAC1B,WAAW,CAAC,sDAAsD,EAAE,UAC1D,4BACA,wDACJ;8CACT;;;;;;8CAGD,yOAAC;oCACG,SAAS,IAAM,WAAW;oCAC1B,WAAW,CAAC,sDAAsD,EAAE,CAAC,UAC3D,4BACA,wDACJ;8CACT;;;;;;;;;;;;sCAML,yOAAC;4BAAK,UAAU;4BAAc,WAAU;;gCACnC,CAAC,yBACE,yOAAC;;sDACG,yOAAC;4CAAM,WAAU;sDAAmD;;;;;;sDAGpE,yOAAC,yLAAK;4CACF,MAAK;4CACL,aAAY;4CACZ,OAAO,SAAS,QAAQ;4CACxB,UAAU,CAAC,IAAM,YAAY;oDAAE,GAAG,QAAQ;oDAAE,UAAU,EAAE,MAAM,CAAC,KAAK;gDAAC;4CACrE,WAAU;4CACV,oBAAM,yOAAC,yPAAI;gDAAC,WAAU;;;;;;4CACtB,QAAQ;;;;;;;;;;;;8CAKpB,yOAAC;;sDACG,yOAAC;4CAAM,WAAU;sDACZ,UAAU,kBAAkB;;;;;;sDAEjC,yOAAC,yLAAK;4CACF,MAAM,UAAU,SAAS;4CACzB,aAAa,UAAU,gBAAgB;4CACvC,OAAO,SAAS,KAAK;4CACrB,UAAU,CAAC,IAAM,YAAY;oDAAE,GAAG,QAAQ;oDAAE,OAAO,EAAE,MAAM,CAAC,KAAK;gDAAC;4CAClE,WAAU;4CACV,MAAM,wBAAU,yOAAC,yPAAI;gDAAC,WAAU;;;;;uEAAe,yOAAC,yPAAI;gDAAC,WAAU;;;;;;4CAC/D,QAAQ;;;;;;;;;;;;8CAIhB,yOAAC;;sDACG,yOAAC;4CAAM,WAAU;sDAAmD;;;;;;sDAGpE,yOAAC,yLAAK;4CACF,MAAK;4CACL,aAAY;4CACZ,OAAO,SAAS,QAAQ;4CACxB,UAAU,CAAC,IAAM,YAAY;oDAAE,GAAG,QAAQ;oDAAE,UAAU,EAAE,MAAM,CAAC,KAAK;gDAAC;4CACrE,WAAU;4CACV,oBAAM,yOAAC,yPAAI;gDAAC,WAAU;;;;;;4CACtB,QAAQ;;;;;;;;;;;;gCAIf,uBACG,yOAAC,mPAAM,CAAC,CAAC;oCACL,SAAS;wCAAE,SAAS;wCAAG,GAAG,CAAC;oCAAG;oCAC9B,SAAS;wCAAE,SAAS;wCAAG,GAAG;oCAAE;oCAC5B,WAAU;8CAET;;;;;;8CAIT,yOAAC,2LAAM;oCACH,MAAK;oCACL,WAAU;oCACV,MAAK;oCACL,UAAU;;wCAET,YAAY,sBAAsB;sDACnC,yOAAC,+QAAU;4CAAC,WAAU;;;;;;;;;;;;;;;;;;sCAI9B,yOAAC;4BAAI,WAAU;;8CACX,yOAAC;oCAAO,WAAU;8CAAmD;;;;;;8CAGrE,yOAAC;oCAAK,WAAU;8CAAwB;;;;;;;;;;;;sCAI5C,yOAAC;4BAAI,WAAU;sCACX,cAAA,yOAAC;gCAAE,WAAU;;oCAAwB;oCAChB;kDACjB,yOAAC;wCACG,SAAS,IAAM,WAAW;wCAC1B,WAAU;kDACb;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BASjB,yOAAC;gBAAI,WAAU;;kCAEX,yOAAC;wBAAI,WAAU;;;;;;kCACf,yOAAC;wBAAI,WAAU;;;;;;kCAEf,yOAAC,mPAAM,CAAC,GAAG;wBACP,SAAS;4BAAE,SAAS;4BAAG,GAAG;wBAAG;wBAC7B,SAAS;4BAAE,SAAS;4BAAG,GAAG;wBAAE;wBAC5B,WAAU;;0CAGV,yOAAC;gCAAI,WAAU;0CACX,cAAA,yOAAC,sPAAG;oCAAC,WAAU;;;;;;;;;;;0CAInB,yOAAC;gCAAG,WAAU;;oCAA+C;kDAEzD,yOAAC;;;;;oCAAK;;;;;;;0CAKV,yOAAC;gCAAI,WAAU;;kDACX,yOAAC;wCAAI,WAAU;;;;;;kDACf,yOAAC;wCAAE,WAAU;kDAAgB;;;;;;;;;;;;0CAMjC,yOAAC;gCAAI,WAAU;;kDACX,yOAAC,yLAAK;wCACF,MAAK;wCACL,aAAY;wCACZ,OAAO;wCACP,UAAU,CAAC,IAAM,iBAAiB,EAAE,MAAM,CAAC,KAAK;wCAChD,WAAU;;;;;;kDAGd,yOAAC,2LAAM;wCACH,SAAS;wCACT,WAAU;wCACV,MAAK;;4CACR;0DAEG,yOAAC,gQAAK;gDAAC,WAAU;;;;;;;;;;;;;;;;;;0CAKzB,yOAAC;gCAAI,WAAU;;kDACX,yOAAC;wCAAE,WAAU;kDAAsD;;;;;;kDAGnE,yOAAC;wCAAG,WAAU;;0DACV,yOAAC;0DAAG;;;;;;0DACJ,yOAAC;0DAAG;;;;;;0DACJ,yOAAC;0DAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOhC;GA9QwB;;QACL,8LAAS;QACH,oMAAe;QACuB,wLAAO;;;KAH9C"}}]
}