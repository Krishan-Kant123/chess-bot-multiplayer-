{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/krishan%20kant/Desktop/projects/chessss/client/src/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\";\r\nimport { twMerge } from \"tailwind-merge\";\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n    return twMerge(clsx(inputs));\r\n}\r\n\r\nexport function formatTime(seconds: number): string {\r\n    if (seconds < 0) return \"âˆž\";\r\n    const mins = Math.floor(seconds / 60);\r\n    const secs = seconds % 60;\r\n    return `${mins}:${secs.toString().padStart(2, \"0\")}`;\r\n}\r\n\r\nexport function formatTimeAgo(date: Date | string): string {\r\n    const now = new Date();\r\n    const past = new Date(date);\r\n    const diffMs = now.getTime() - past.getTime();\r\n    const diffMins = Math.floor(diffMs / 60000);\r\n    const diffHours = Math.floor(diffMs / 3600000);\r\n    const diffDays = Math.floor(diffMs / 86400000);\r\n\r\n    if (diffMins < 1) return \"Just now\";\r\n    if (diffMins < 60) return `${diffMins}m ago`;\r\n    if (diffHours < 24) return `${diffHours}h ago`;\r\n    if (diffDays < 7) return `${diffDays}d ago`;\r\n    return past.toLocaleDateString();\r\n}\r\n\r\nexport function formatRating(rating: number): string {\r\n    return rating.toLocaleString();\r\n}\r\n\r\nexport function getRatingChangeColor(change: number): string {\r\n    if (change > 0) return \"text-success\";\r\n    if (change < 0) return \"text-accent\";\r\n    return \"text-foreground-muted\";\r\n}\r\n\r\nexport function getResultColor(result: \"win\" | \"loss\" | \"draw\"): string {\r\n    switch (result) {\r\n        case \"win\":\r\n            return \"text-success\";\r\n        case \"loss\":\r\n            return \"text-accent\";\r\n        case \"draw\":\r\n            return \"text-foreground-muted\";\r\n    }\r\n}\r\n\r\nexport function getResultLabel(result: \"win\" | \"loss\" | \"draw\"): string {\r\n    return result.toUpperCase();\r\n}\r\n\r\nexport function truncateUsername(username: string, maxLength = 15): string {\r\n    if (username.length <= maxLength) return username;\r\n    return username.slice(0, maxLength - 2) + \"..\";\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACtC,OAAO,IAAA,qNAAO,EAAC,IAAA,4LAAI,EAAC;AACxB;AAEO,SAAS,WAAW,OAAe;IACtC,IAAI,UAAU,GAAG,OAAO;IACxB,MAAM,OAAO,KAAK,KAAK,CAAC,UAAU;IAClC,MAAM,OAAO,UAAU;IACvB,OAAO,GAAG,KAAK,CAAC,EAAE,KAAK,QAAQ,GAAG,QAAQ,CAAC,GAAG,MAAM;AACxD;AAEO,SAAS,cAAc,IAAmB;IAC7C,MAAM,MAAM,IAAI;IAChB,MAAM,OAAO,IAAI,KAAK;IACtB,MAAM,SAAS,IAAI,OAAO,KAAK,KAAK,OAAO;IAC3C,MAAM,WAAW,KAAK,KAAK,CAAC,SAAS;IACrC,MAAM,YAAY,KAAK,KAAK,CAAC,SAAS;IACtC,MAAM,WAAW,KAAK,KAAK,CAAC,SAAS;IAErC,IAAI,WAAW,GAAG,OAAO;IACzB,IAAI,WAAW,IAAI,OAAO,GAAG,SAAS,KAAK,CAAC;IAC5C,IAAI,YAAY,IAAI,OAAO,GAAG,UAAU,KAAK,CAAC;IAC9C,IAAI,WAAW,GAAG,OAAO,GAAG,SAAS,KAAK,CAAC;IAC3C,OAAO,KAAK,kBAAkB;AAClC;AAEO,SAAS,aAAa,MAAc;IACvC,OAAO,OAAO,cAAc;AAChC;AAEO,SAAS,qBAAqB,MAAc;IAC/C,IAAI,SAAS,GAAG,OAAO;IACvB,IAAI,SAAS,GAAG,OAAO;IACvB,OAAO;AACX;AAEO,SAAS,eAAe,MAA+B;IAC1D,OAAQ;QACJ,KAAK;YACD,OAAO;QACX,KAAK;YACD,OAAO;QACX,KAAK;YACD,OAAO;IACf;AACJ;AAEO,SAAS,eAAe,MAA+B;IAC1D,OAAO,OAAO,WAAW;AAC7B;AAEO,SAAS,iBAAiB,QAAgB,EAAE,YAAY,EAAE;IAC7D,IAAI,SAAS,MAAM,IAAI,WAAW,OAAO;IACzC,OAAO,SAAS,KAAK,CAAC,GAAG,YAAY,KAAK;AAC9C"}},
    {"offset": {"line": 80, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/krishan%20kant/Desktop/projects/chessss/client/src/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { Slot } from \"@radix-ui/react-slot\";\r\nimport { cva, type VariantProps } from \"class-variance-authority\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst buttonVariants = cva(\r\n    \"inline-flex items-center justify-center gap-2 whitespace-nowrap font-semibold transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-accent disabled:pointer-events-none disabled:opacity-50 active:scale-95\",\r\n    {\r\n        variants: {\r\n            variant: {\r\n                default:\r\n                    \"bg-accent hover:bg-accent-light text-white shadow-md hover:shadow-glow-red\",\r\n                destructive:\r\n                    \"bg-red-900 hover:bg-red-800 text-white\",\r\n                outline:\r\n                    \"border border-border bg-transparent hover:bg-white/5 hover:border-accent text-white\",\r\n                secondary:\r\n                    \"bg-background-elevated hover:bg-background-secondary text-white border border-border\",\r\n                ghost:\r\n                    \"hover:bg-white/5 text-foreground-muted hover:text-white\",\r\n                link:\r\n                    \"text-accent underline-offset-4 hover:underline\",\r\n            },\r\n            size: {\r\n                default: \"h-11 px-6 py-2 text-sm\",\r\n                sm: \"h-9 px-4 text-xs\",\r\n                lg: \"h-14 px-8 text-base\",\r\n                xl: \"h-16 px-10 text-lg\",\r\n                icon: \"h-10 w-10\",\r\n            },\r\n        },\r\n        defaultVariants: {\r\n            variant: \"default\",\r\n            size: \"default\",\r\n        },\r\n    }\r\n);\r\n\r\nexport interface ButtonProps\r\n    extends React.ButtonHTMLAttributes<HTMLButtonElement>,\r\n    VariantProps<typeof buttonVariants> {\r\n    asChild?: boolean;\r\n}\r\n\r\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\r\n    ({ className, variant, size, asChild = false, ...props }, ref) => {\r\n        const Comp = asChild ? Slot : \"button\";\r\n        return (\r\n            <Comp\r\n                className={cn(buttonVariants({ variant, size, className }))}\r\n                ref={ref}\r\n                {...props}\r\n            />\r\n        );\r\n    }\r\n);\r\nButton.displayName = \"Button\";\r\n\r\nexport { Button, buttonVariants };\r\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AACA;;;;;;AAEA,MAAM,iBAAiB,IAAA,sNAAG,EACtB,wPACA;IACI,UAAU;QACN,SAAS;YACL,SACI;YACJ,aACI;YACJ,SACI;YACJ,WACI;YACJ,OACI;YACJ,MACI;QACR;QACA,MAAM;YACF,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,IAAI;YACJ,MAAM;QACV;IACJ;IACA,iBAAiB;QACb,SAAS;QACT,MAAM;IACV;AACJ;AASJ,MAAM,uBAAS,uNAAgB,MAC3B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO,EAAE;IACtD,MAAM,OAAO,UAAU,uNAAI,GAAG;IAC9B,qBACI,yOAAC;QACG,WAAW,IAAA,wKAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,KAAK;QACJ,GAAG,KAAK;;;;;;AAGrB;;AAEJ,OAAO,WAAW,GAAG"}},
    {"offset": {"line": 148, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/krishan%20kant/Desktop/projects/chessss/client/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst Card = React.forwardRef<\r\n    HTMLDivElement,\r\n    React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n    <div\r\n        ref={ref}\r\n        className={cn(\r\n            \"bg-background-card border border-border rounded-lg\",\r\n            className\r\n        )}\r\n        {...props}\r\n    />\r\n));\r\nCard.displayName = \"Card\";\r\n\r\nconst CardHeader = React.forwardRef<\r\n    HTMLDivElement,\r\n    React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n    <div\r\n        ref={ref}\r\n        className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\r\n        {...props}\r\n    />\r\n));\r\nCardHeader.displayName = \"CardHeader\";\r\n\r\nconst CardTitle = React.forwardRef<\r\n    HTMLParagraphElement,\r\n    React.HTMLAttributes<HTMLHeadingElement>\r\n>(({ className, ...props }, ref) => (\r\n    <h3\r\n        ref={ref}\r\n        className={cn(\r\n            \"text-xl font-semibold leading-none tracking-tight text-white\",\r\n            className\r\n        )}\r\n        {...props}\r\n    />\r\n));\r\nCardTitle.displayName = \"CardTitle\";\r\n\r\nconst CardDescription = React.forwardRef<\r\n    HTMLParagraphElement,\r\n    React.HTMLAttributes<HTMLParagraphElement>\r\n>(({ className, ...props }, ref) => (\r\n    <p\r\n        ref={ref}\r\n        className={cn(\"text-sm text-foreground-muted\", className)}\r\n        {...props}\r\n    />\r\n));\r\nCardDescription.displayName = \"CardDescription\";\r\n\r\nconst CardContent = React.forwardRef<\r\n    HTMLDivElement,\r\n    React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n    <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\r\n));\r\nCardContent.displayName = \"CardContent\";\r\n\r\nconst CardFooter = React.forwardRef<\r\n    HTMLDivElement,\r\n    React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n    <div\r\n        ref={ref}\r\n        className={cn(\"flex items-center p-6 pt-0\", className)}\r\n        {...props}\r\n    />\r\n));\r\nCardFooter.displayName = \"CardFooter\";\r\n\r\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent };\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA;AACA;;;;AAEA,MAAM,qBAAO,uNAAgB,MAG3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,yOAAC;QACG,KAAK;QACL,WAAW,IAAA,wKAAE,EACT,sDACA;QAEH,GAAG,KAAK;;;;;;;AAGjB,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,uNAAgB,OAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,yOAAC;QACG,KAAK;QACL,WAAW,IAAA,wKAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGjB,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,uNAAgB,OAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,yOAAC;QACG,KAAK;QACL,WAAW,IAAA,wKAAE,EACT,gEACA;QAEH,GAAG,KAAK;;;;;;;AAGjB,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,uNAAgB,OAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,yOAAC;QACG,KAAK;QACL,WAAW,IAAA,wKAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGjB,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,uNAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,yOAAC;QAAI,KAAK;QAAK,WAAW,IAAA,wKAAE,EAAC,YAAY;QAAa,GAAG,KAAK;;;;;;;AAElE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,uNAAgB,QAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,yOAAC;QACG,KAAK;QACL,WAAW,IAAA,wKAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;;AAGjB,WAAW,WAAW,GAAG"}},
    {"offset": {"line": 255, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/krishan%20kant/Desktop/projects/chessss/client/src/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nexport interface InputProps\r\n    extends React.InputHTMLAttributes<HTMLInputElement> {\r\n    icon?: React.ReactNode;\r\n}\r\n\r\nconst Input = React.forwardRef<HTMLInputElement, InputProps>(\r\n    ({ className, type, icon, ...props }, ref) => {\r\n        return (\r\n            <div className=\"relative\">\r\n                <input\r\n                    type={type}\r\n                    className={cn(\r\n                        \"flex h-12 w-full bg-background-secondary border border-border px-4 py-3 text-sm text-white placeholder:text-foreground-dim focus:outline-none focus:border-accent focus:ring-1 focus:ring-accent/50 transition-all disabled:cursor-not-allowed disabled:opacity-50\",\r\n                        icon && \"pr-12\",\r\n                        className\r\n                    )}\r\n                    ref={ref}\r\n                    {...props}\r\n                />\r\n                {icon && (\r\n                    <div className=\"absolute right-4 top-1/2 -translate-y-1/2 text-foreground-dim\">\r\n                        {icon}\r\n                    </div>\r\n                )}\r\n            </div>\r\n        );\r\n    }\r\n);\r\nInput.displayName = \"Input\";\r\n\r\nexport { Input };\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAOA,MAAM,sBAAQ,uNAAgB,MAC1B,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;IAClC,qBACI,yOAAC;QAAI,WAAU;;0BACX,yOAAC;gBACG,MAAM;gBACN,WAAW,IAAA,wKAAE,EACT,sQACA,QAAQ,SACR;gBAEJ,KAAK;gBACJ,GAAG,KAAK;;;;;;YAEZ,sBACG,yOAAC;gBAAI,WAAU;0BACV;;;;;;;;;;;;AAKrB;;AAEJ,MAAM,WAAW,GAAG"}},
    {"offset": {"line": 307, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/krishan%20kant/Desktop/projects/chessss/client/src/components/ui/avatar.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport * as React from \"react\";\r\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst Avatar = React.forwardRef<\r\n    React.ElementRef<typeof AvatarPrimitive.Root>,\r\n    React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\r\n>(({ className, ...props }, ref) => (\r\n    <AvatarPrimitive.Root\r\n        ref={ref}\r\n        className={cn(\r\n            \"relative flex h-10 w-10 shrink-0 overflow-hidden rounded-lg border border-border\",\r\n            className\r\n        )}\r\n        {...props}\r\n    />\r\n));\r\nAvatar.displayName = AvatarPrimitive.Root.displayName;\r\n\r\nconst AvatarImage = React.forwardRef<\r\n    React.ElementRef<typeof AvatarPrimitive.Image>,\r\n    React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\r\n>(({ className, ...props }, ref) => (\r\n    <AvatarPrimitive.Image\r\n        ref={ref}\r\n        className={cn(\"aspect-square h-full w-full object-cover\", className)}\r\n        {...props}\r\n    />\r\n));\r\nAvatarImage.displayName = AvatarPrimitive.Image.displayName;\r\n\r\nconst AvatarFallback = React.forwardRef<\r\n    React.ElementRef<typeof AvatarPrimitive.Fallback>,\r\n    React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\r\n>(({ className, ...props }, ref) => (\r\n    <AvatarPrimitive.Fallback\r\n        ref={ref}\r\n        className={cn(\r\n            \"flex h-full w-full items-center justify-center bg-accent/20 text-accent font-bold\",\r\n            className\r\n        )}\r\n        {...props}\r\n    />\r\n));\r\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName;\r\n\r\nexport { Avatar, AvatarImage, AvatarFallback };\r\n"],"names":[],"mappings":";;;;;;;;;AAEA;AACA;AACA;AAJA;;;;;AAMA,MAAM,uBAAS,uNAAgB,MAG7B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,yOAAC,yNAAoB;QACjB,KAAK;QACL,WAAW,IAAA,wKAAE,EACT,oFACA;QAEH,GAAG,KAAK;;;;;;;AAGjB,OAAO,WAAW,GAAG,yNAAoB,CAAC,WAAW;AAErD,MAAM,4BAAc,uNAAgB,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,yOAAC,0NAAqB;QAClB,KAAK;QACL,WAAW,IAAA,wKAAE,EAAC,4CAA4C;QACzD,GAAG,KAAK;;;;;;;AAGjB,YAAY,WAAW,GAAG,0NAAqB,CAAC,WAAW;AAE3D,MAAM,+BAAiB,uNAAgB,OAGrC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,yOAAC,6NAAwB;QACrB,KAAK;QACL,WAAW,IAAA,wKAAE,EACT,qFACA;QAEH,GAAG,KAAK;;;;;;;AAGjB,eAAe,WAAW,GAAG,6NAAwB,CAAC,WAAW"}},
    {"offset": {"line": 372, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/krishan%20kant/Desktop/projects/chessss/client/src/app/game/%5BroomId%5D/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect, useCallback } from \"react\";\r\nimport { useParams, useRouter } from \"next/navigation\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport { Chess } from \"chess.js\";\r\nimport { Chessboard } from \"react-chessboard\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card } from \"@/components/ui/card\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\r\nimport { useAuth } from \"@/context/AuthContext\";\r\nimport socketService from \"@/lib/socket\";\r\nimport { Room, Move } from \"@/lib/api\";\r\nimport { formatTime, cn } from \"@/lib/utils\";\r\nimport {\r\n    Flag,\r\n    Handshake,\r\n    MessageSquare,\r\n    ChevronLeft,\r\n    ChevronRight,\r\n    Send,\r\n    X,\r\n    Crown,\r\n    Clock,\r\n} from \"lucide-react\";\r\n\r\ninterface ChatMessage {\r\n    id: string;\r\n    username: string;\r\n    message: string;\r\n    timestamp: string;\r\n    isGuest: boolean;\r\n}\r\n\r\nexport default function GamePage() {\r\n    const params = useParams();\r\n    const router = useRouter();\r\n    const { user } = useAuth();\r\n    const roomId = params.roomId as string;\r\n\r\n    // Game state\r\n    const [game, setGame] = useState(new Chess());\r\n    const [room, setRoom] = useState<Room | null>(null);\r\n    const [playerColor, setPlayerColor] = useState<\"white\" | \"black\">(\"white\");\r\n    const [isMyTurn, setIsMyTurn] = useState(false);\r\n    const [selectedSquare, setSelectedSquare] = useState<string | null>(null);\r\n    const [legalMoves, setLegalMoves] = useState<string[]>([]);\r\n\r\n    // Timers\r\n    const [myTime, setMyTime] = useState(600);\r\n    const [opponentTime, setOpponentTime] = useState(600);\r\n\r\n    // Move history\r\n    const [moveHistory, setMoveHistory] = useState<string[]>([]);\r\n    const [currentMoveIndex, setCurrentMoveIndex] = useState(-1);\r\n\r\n    // Chat\r\n    const [chatMessages, setChatMessages] = useState<ChatMessage[]>([]);\r\n    const [chatInput, setChatInput] = useState(\"\");\r\n    const [isChatOpen, setIsChatOpen] = useState(false);\r\n\r\n    // Game end\r\n    const [gameResult, setGameResult] = useState<{ winner: string; reason: string } | null>(null);\r\n\r\n    // Draw offer\r\n    const [drawOffered, setDrawOffered] = useState(false);\r\n    const [drawOfferedBy, setDrawOfferedBy] = useState<string | null>(null);\r\n\r\n    // Opponent status\r\n    const [opponentDisconnected, setOpponentDisconnected] = useState(false);\r\n\r\n    // Initialize socket listeners\r\n    useEffect(() => {\r\n        const socket = socketService.getSocket();\r\n        if (!socket) {\r\n            router.push(\"/dashboard\");\r\n            return;\r\n        }\r\n\r\n        // Join the room\r\n        socketService.joinRoom(roomId);\r\n\r\n        // Room update\r\n        const unsubRoomUpdate = socketService.onRoomUpdate((data) => {\r\n            setRoom(data.room);\r\n            updateGameState(data.room);\r\n        });\r\n\r\n        // Game started\r\n        const unsubGameStarted = socketService.onGameStarted((data) => {\r\n            setRoom(data.room);\r\n            updateGameState(data.room);\r\n        });\r\n\r\n        // Move made\r\n        const unsubMoveMade = socketService.onMoveMade((data) => {\r\n            const newGame = new Chess(data.fen);\r\n            setGame(newGame);\r\n            setMoveHistory((prev) => [...prev, data.move.san || `${data.move.from}-${data.move.to}`]);\r\n            setCurrentMoveIndex((prev) => prev + 1);\r\n            setIsMyTurn(data.currentTurn === playerColor);\r\n        });\r\n\r\n        // Time update\r\n        const unsubTimeUpdate = socketService.onTimeUpdate((data) => {\r\n            if (room) {\r\n                const myPlayer = room.player1.color === playerColor ? \"player1\" : \"player2\";\r\n                const opPlayer = myPlayer === \"player1\" ? \"player2\" : \"player1\";\r\n                setMyTime(myPlayer === \"player1\" ? data.player1TimeLeft : data.player2TimeLeft);\r\n                setOpponentTime(opPlayer === \"player1\" ? data.player1TimeLeft : data.player2TimeLeft);\r\n            }\r\n        });\r\n\r\n        // Game ended\r\n        const unsubGameEnded = socketService.onGameEnded((data) => {\r\n            setGameResult(data.result);\r\n        });\r\n\r\n        // Chat\r\n        const unsubChat = socketService.onChatMessage((data) => {\r\n            setChatMessages((prev) => [...prev, data]);\r\n        });\r\n\r\n        // Draw offer\r\n        const unsubDrawOffered = socketService.onDrawOffered((data) => {\r\n            setDrawOfferedBy(data.username);\r\n            setDrawOffered(true);\r\n        });\r\n\r\n        const unsubDrawDeclined = socketService.onDrawDeclined(() => {\r\n            setDrawOffered(false);\r\n            setDrawOfferedBy(null);\r\n        });\r\n\r\n        // Opponent disconnect\r\n        const unsubOpponentDisconnected = socketService.onOpponentDisconnected(() => {\r\n            setOpponentDisconnected(true);\r\n        });\r\n\r\n        const unsubOpponentReconnected = socketService.onOpponentReconnected(() => {\r\n            setOpponentDisconnected(false);\r\n        });\r\n\r\n        // Reconnection\r\n        const unsubReconnected = socketService.onGameReconnected((data) => {\r\n            setRoom(data.room);\r\n            updateGameState(data.room);\r\n        });\r\n\r\n        return () => {\r\n            unsubRoomUpdate();\r\n            unsubGameStarted();\r\n            unsubMoveMade();\r\n            unsubTimeUpdate();\r\n            unsubGameEnded();\r\n            unsubChat();\r\n            unsubDrawOffered();\r\n            unsubDrawDeclined();\r\n            unsubOpponentDisconnected();\r\n            unsubOpponentReconnected();\r\n            unsubReconnected();\r\n        };\r\n    }, [roomId, playerColor, room]);\r\n\r\n    const updateGameState = (roomData: Room) => {\r\n        const newGame = new Chess(roomData.gameData.fen);\r\n        setGame(newGame);\r\n\r\n        // Determine player color\r\n        const myId = user?.id || user?._id || user?.guestId;\r\n        if (roomData.player1.userId === myId || roomData.player1.guestId === myId) {\r\n            setPlayerColor(roomData.player1.color);\r\n            setMyTime(roomData.player1.timeLeft);\r\n            setOpponentTime(roomData.player2.timeLeft);\r\n        } else {\r\n            setPlayerColor(roomData.player2.color);\r\n            setMyTime(roomData.player2.timeLeft);\r\n            setOpponentTime(roomData.player1.timeLeft);\r\n        }\r\n\r\n        setIsMyTurn(roomData.currentTurn === playerColor);\r\n    };\r\n\r\n    // Handle square click\r\n    const onSquareClick = (square: string) => {\r\n        if (!isMyTurn || gameResult) return;\r\n\r\n        if (selectedSquare) {\r\n            // Try to make a move\r\n            const move = { from: selectedSquare, to: square, promotion: \"q\" };\r\n            try {\r\n                const result = game.move(move);\r\n                if (result) {\r\n                    socketService.makeMove(roomId, move);\r\n                    setSelectedSquare(null);\r\n                    setLegalMoves([]);\r\n                }\r\n            } catch {\r\n                // Invalid move, select new piece\r\n                selectPiece(square);\r\n            }\r\n        } else {\r\n            selectPiece(square);\r\n        }\r\n    };\r\n\r\n    const selectPiece = (square: string) => {\r\n        const piece = game.get(square);\r\n        if (piece && piece.color === playerColor[0]) {\r\n            setSelectedSquare(square);\r\n            const moves = game.moves({ square, verbose: true });\r\n            setLegalMoves(moves.map((m) => m.to));\r\n        } else {\r\n            setSelectedSquare(null);\r\n            setLegalMoves([]);\r\n        }\r\n    };\r\n\r\n    // Handle piece drop (drag and drop)\r\n    const onDrop = (sourceSquare: string, targetSquare: string) => {\r\n        if (!isMyTurn || gameResult) return false;\r\n\r\n        const move = { from: sourceSquare, to: targetSquare, promotion: \"q\" };\r\n        try {\r\n            const result = game.move(move);\r\n            if (result) {\r\n                socketService.makeMove(roomId, move);\r\n                setSelectedSquare(null);\r\n                setLegalMoves([]);\r\n                return true;\r\n            }\r\n        } catch {\r\n            return false;\r\n        }\r\n        return false;\r\n    };\r\n\r\n    const handleResign = () => {\r\n        if (confirm(\"Are you sure you want to resign?\")) {\r\n            socketService.resign(roomId);\r\n        }\r\n    };\r\n\r\n    const handleOfferDraw = () => {\r\n        socketService.offerDraw(roomId);\r\n    };\r\n\r\n    const handleDrawResponse = (accept: boolean) => {\r\n        socketService.respondToDraw(roomId, accept);\r\n        setDrawOffered(false);\r\n        setDrawOfferedBy(null);\r\n    };\r\n\r\n    const handleSendChat = () => {\r\n        if (chatInput.trim()) {\r\n            socketService.sendMessage(roomId, chatInput.trim());\r\n            setChatInput(\"\");\r\n        }\r\n    };\r\n\r\n    // Custom square styles\r\n    const customSquareStyles: Record<string, React.CSSProperties> = {};\r\n    if (selectedSquare) {\r\n        customSquareStyles[selectedSquare] = {\r\n            backgroundColor: \"rgba(220, 38, 38, 0.4)\",\r\n        };\r\n    }\r\n    legalMoves.forEach((square) => {\r\n        customSquareStyles[square] = {\r\n            background: game.get(square)\r\n                ? \"radial-gradient(circle, rgba(220, 38, 38, 0.6) 85%, transparent 85%)\"\r\n                : \"radial-gradient(circle, rgba(220, 38, 38, 0.4) 25%, transparent 25%)\",\r\n        };\r\n    });\r\n\r\n    const opponentName = room\r\n        ? playerColor === room.player1.color\r\n            ? room.player2.guestUsername || \"Opponent\"\r\n            : room.player1.guestUsername || \"Opponent\"\r\n        : \"Opponent\";\r\n\r\n    const myName = user?.username || \"You\";\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-background p-4 flex\">\r\n            {/* Main Game Area */}\r\n            <div className=\"flex-1 flex flex-col items-center justify-center\">\r\n                {/* Opponent Info */}\r\n                <div className=\"w-full max-w-lg flex items-center justify-between mb-4\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                        <Avatar>\r\n                            <AvatarFallback>{opponentName.slice(0, 2).toUpperCase()}</AvatarFallback>\r\n                        </Avatar>\r\n                        <div>\r\n                            <div className=\"font-semibold text-white\">{opponentName}</div>\r\n                            {opponentDisconnected && (\r\n                                <div className=\"text-xs text-accent\">Disconnected</div>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                    <div className={cn(\r\n                        \"font-mono text-2xl px-4 py-2 rounded\",\r\n                        !isMyTurn && room?.gameStatus === \"in_progress\"\r\n                            ? \"bg-accent text-white\"\r\n                            : \"bg-background-elevated text-foreground-muted\"\r\n                    )}>\r\n                        {formatTime(opponentTime)}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Chessboard */}\r\n                <div className=\"relative\">\r\n                    <Chessboard\r\n                        position={game.fen()}\r\n                        onSquareClick={onSquareClick}\r\n                        onPieceDrop={onDrop}\r\n                        boardOrientation={playerColor}\r\n                        customSquareStyles={customSquareStyles}\r\n                        boardWidth={560}\r\n                        customBoardStyle={{\r\n                            borderRadius: \"4px\",\r\n                            boxShadow: \"0 0 30px rgba(0,0,0,0.5)\",\r\n                        }}\r\n                        customDarkSquareStyle={{ backgroundColor: \"#1a1a1a\" }}\r\n                        customLightSquareStyle={{ backgroundColor: \"#2a2a2a\" }}\r\n                    />\r\n\r\n                    {/* Turn indicator overlay */}\r\n                    {isMyTurn && room?.gameStatus === \"in_progress\" && (\r\n                        <motion.div\r\n                            initial={{ opacity: 0 }}\r\n                            animate={{ opacity: 1 }}\r\n                            className=\"absolute -bottom-2 left-1/2 -translate-x-1/2 bg-accent px-4 py-1 rounded-full text-sm font-semibold\"\r\n                        >\r\n                            YOUR TURN\r\n                        </motion.div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Player Info */}\r\n                <div className=\"w-full max-w-lg flex items-center justify-between mt-4\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                        <Avatar>\r\n                            <AvatarFallback>{myName.slice(0, 2).toUpperCase()}</AvatarFallback>\r\n                        </Avatar>\r\n                        <div>\r\n                            <div className=\"font-semibold text-white\">{myName}</div>\r\n                            <div className=\"text-xs text-foreground-muted\">{playerColor.toUpperCase()}</div>\r\n                        </div>\r\n                    </div>\r\n                    <div className={cn(\r\n                        \"font-mono text-2xl px-4 py-2 rounded\",\r\n                        isMyTurn && room?.gameStatus === \"in_progress\"\r\n                            ? \"bg-accent text-white animate-pulse\"\r\n                            : \"bg-background-elevated text-foreground-muted\"\r\n                    )}>\r\n                        {formatTime(myTime)}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Game Controls */}\r\n                <div className=\"flex gap-4 mt-6\">\r\n                    <Button variant=\"secondary\" onClick={handleResign} disabled={!!gameResult}>\r\n                        <Flag className=\"w-4 h-4\" />\r\n                        RESIGN\r\n                    </Button>\r\n                    <Button variant=\"secondary\" onClick={handleOfferDraw} disabled={!!gameResult || drawOffered}>\r\n                        <Handshake className=\"w-4 h-4\" />\r\n                        OFFER DRAW\r\n                    </Button>\r\n                    <Button variant=\"secondary\" onClick={() => setIsChatOpen(!isChatOpen)}>\r\n                        <MessageSquare className=\"w-4 h-4\" />\r\n                        CHAT\r\n                    </Button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Side Panel */}\r\n            <div className=\"w-80 flex flex-col gap-4\">\r\n                {/* Move History */}\r\n                <Card className=\"flex-1 p-4 overflow-hidden flex flex-col\">\r\n                    <h3 className=\"font-display text-lg mb-4\">MOVE HISTORY</h3>\r\n                    <div className=\"flex-1 overflow-y-auto font-mono text-sm\">\r\n                        {moveHistory.reduce((acc, move, index) => {\r\n                            if (index % 2 === 0) {\r\n                                acc.push(\r\n                                    <div key={index} className=\"flex gap-4 py-1 hover:bg-white/5\">\r\n                                        <span className=\"text-foreground-dim w-8\">{Math.floor(index / 2) + 1}.</span>\r\n                                        <span className=\"w-16\">{move}</span>\r\n                                        <span className=\"w-16\">{moveHistory[index + 1] || \"\"}</span>\r\n                                    </div>\r\n                                );\r\n                            }\r\n                            return acc;\r\n                        }, [] as JSX.Element[])}\r\n                    </div>\r\n                </Card>\r\n\r\n                {/* Chat Panel */}\r\n                <AnimatePresence>\r\n                    {isChatOpen && (\r\n                        <motion.div\r\n                            initial={{ opacity: 0, height: 0 }}\r\n                            animate={{ opacity: 1, height: 300 }}\r\n                            exit={{ opacity: 0, height: 0 }}\r\n                        >\r\n                            <Card className=\"h-full p-4 flex flex-col\">\r\n                                <div className=\"flex items-center justify-between mb-4\">\r\n                                    <h3 className=\"font-display text-lg\">CHAT</h3>\r\n                                    <button onClick={() => setIsChatOpen(false)}>\r\n                                        <X className=\"w-4 h-4 text-foreground-muted\" />\r\n                                    </button>\r\n                                </div>\r\n                                <div className=\"flex-1 overflow-y-auto space-y-2 mb-4\">\r\n                                    {chatMessages.map((msg) => (\r\n                                        <div key={msg.id} className=\"text-sm\">\r\n                                            <span className=\"text-accent font-semibold\">{msg.username}: </span>\r\n                                            <span className=\"text-foreground-muted\">{msg.message}</span>\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n                                <div className=\"flex gap-2\">\r\n                                    <Input\r\n                                        value={chatInput}\r\n                                        onChange={(e) => setChatInput(e.target.value)}\r\n                                        onKeyDown={(e) => e.key === \"Enter\" && handleSendChat()}\r\n                                        placeholder=\"Type message...\"\r\n                                        className=\"flex-1\"\r\n                                    />\r\n                                    <Button onClick={handleSendChat} size=\"icon\">\r\n                                        <Send className=\"w-4 h-4\" />\r\n                                    </Button>\r\n                                </div>\r\n                            </Card>\r\n                        </motion.div>\r\n                    )}\r\n                </AnimatePresence>\r\n            </div>\r\n\r\n            {/* Draw Offer Modal */}\r\n            <AnimatePresence>\r\n                {drawOffered && drawOfferedBy && (\r\n                    <motion.div\r\n                        initial={{ opacity: 0 }}\r\n                        animate={{ opacity: 1 }}\r\n                        exit={{ opacity: 0 }}\r\n                        className=\"fixed inset-0 bg-black/80 flex items-center justify-center z-50\"\r\n                    >\r\n                        <Card className=\"p-8 text-center max-w-md\">\r\n                            <Handshake className=\"w-16 h-16 text-accent mx-auto mb-4\" />\r\n                            <h2 className=\"font-display text-2xl mb-2\">DRAW OFFERED</h2>\r\n                            <p className=\"text-foreground-muted mb-6\">\r\n                                {drawOfferedBy} has offered a draw.\r\n                            </p>\r\n                            <div className=\"flex gap-4 justify-center\">\r\n                                <Button onClick={() => handleDrawResponse(true)}>\r\n                                    ACCEPT\r\n                                </Button>\r\n                                <Button variant=\"secondary\" onClick={() => handleDrawResponse(false)}>\r\n                                    DECLINE\r\n                                </Button>\r\n                            </div>\r\n                        </Card>\r\n                    </motion.div>\r\n                )}\r\n            </AnimatePresence>\r\n\r\n            {/* Game Result Modal */}\r\n            <AnimatePresence>\r\n                {gameResult && (\r\n                    <motion.div\r\n                        initial={{ opacity: 0 }}\r\n                        animate={{ opacity: 1 }}\r\n                        exit={{ opacity: 0 }}\r\n                        className=\"fixed inset-0 z-50\"\r\n                    >\r\n                        {/* Determine if this is victory, defeat, or draw */}\r\n                        {(() => {\r\n                            const isVictory = gameResult.winner === playerColor;\r\n                            const isDraw = gameResult.winner === \"draw\";\r\n                            const isDefeat = !isVictory && !isDraw;\r\n\r\n                            if (isVictory) {\r\n                                // Victory Screen\r\n                                return (\r\n                                    <div className=\"w-full h-full bg-accent flex items-center justify-center corner-brackets\">\r\n                                        <motion.div\r\n                                            initial={{ scale: 0.8, opacity: 0 }}\r\n                                            animate={{ scale: 1, opacity: 1 }}\r\n                                            className=\"text-center\"\r\n                                        >\r\n                                            <h1 className=\"font-display text-9xl text-white mb-4\">VICTORY</h1>\r\n                                            <p className=\"text-white/80 uppercase tracking-widest mb-2 text-xl\">\r\n                                                {gameResult.reason.replace(/_/g, \" \")}\r\n                                            </p>\r\n                                            <p className=\"text-white/60 uppercase tracking-widest mb-8\">\r\n                                                {moveHistory.length} MOVES\r\n                                            </p>\r\n                                            <div className=\"flex gap-4 justify-center\">\r\n                                                <Button className=\"bg-black hover:bg-gray-900\" size=\"lg\">\r\n                                                    <Crown className=\"w-5 h-5\" />\r\n                                                    REMATCH\r\n                                                </Button>\r\n                                                <Button\r\n                                                    variant=\"outline\"\r\n                                                    size=\"lg\"\r\n                                                    className=\"border-white text-white hover:bg-white/10\"\r\n                                                    onClick={() => router.push(\"/dashboard\")}\r\n                                                >\r\n                                                    LOBBY\r\n                                                </Button>\r\n                                            </div>\r\n                                        </motion.div>\r\n                                    </div>\r\n                                );\r\n                            } else if (isDraw) {\r\n                                // Draw Screen\r\n                                return (\r\n                                    <div className=\"w-full h-full bg-background flex items-center justify-center\">\r\n                                        <motion.div\r\n                                            initial={{ scale: 0.8, opacity: 0 }}\r\n                                            animate={{ scale: 1, opacity: 1 }}\r\n                                            className=\"text-center\"\r\n                                        >\r\n                                            <h1 className=\"font-display text-8xl text-foreground-muted mb-4\">DRAW</h1>\r\n                                            <p className=\"text-foreground-dim uppercase tracking-widest mb-8\">\r\n                                                {gameResult.reason.replace(/_/g, \" \")}\r\n                                            </p>\r\n                                            <div className=\"flex gap-4 justify-center\">\r\n                                                <Button size=\"lg\">REMATCH</Button>\r\n                                                <Button variant=\"secondary\" size=\"lg\" onClick={() => router.push(\"/dashboard\")}>\r\n                                                    LOBBY\r\n                                                </Button>\r\n                                            </div>\r\n                                        </motion.div>\r\n                                    </div>\r\n                                );\r\n                            } else {\r\n                                // Defeat Screen\r\n                                return (\r\n                                    <div className=\"w-full h-full bg-background flex items-center justify-center\">\r\n                                        <motion.div\r\n                                            initial={{ scale: 0.8, opacity: 0 }}\r\n                                            animate={{ scale: 1, opacity: 1 }}\r\n                                            className=\"text-center relative\"\r\n                                        >\r\n                                            <div className=\"absolute top-1/2 left-0 right-0 h-1 bg-accent transform -rotate-6\" />\r\n                                            <h1 className=\"font-display text-9xl text-white mb-4 relative line-through decoration-accent\">\r\n                                                DEFEAT\r\n                                            </h1>\r\n                                            <p className=\"text-accent uppercase tracking-widest mb-2 text-xl\">\r\n                                                {gameResult.reason.replace(/_/g, \" \")}\r\n                                            </p>\r\n                                            <p className=\"text-foreground-dim uppercase tracking-widest mb-8\">\r\n                                                THE KING HAS FALLEN.\r\n                                            </p>\r\n                                            <div className=\"flex gap-4 justify-center\">\r\n                                                <Button className=\"bg-accent hover:bg-accent-light\" size=\"lg\">REMATCH</Button>\r\n                                                <Button variant=\"secondary\" size=\"lg\" onClick={() => router.push(\"/dashboard\")}>\r\n                                                    ANALYSIS\r\n                                                </Button>\r\n                                            </div>\r\n                                        </motion.div>\r\n                                    </div>\r\n                                );\r\n                            }\r\n                        })()}\r\n                    </motion.div>\r\n                )}\r\n            </AnimatePresence>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}